<p-toast />
<p-confirmDialog />

<section class="px-32 py-14">
  <p-button
    label="New product"
    [link]="true"
    routerLink="/create"
    class="px-4 py-2 p-button p-ripple font-normal no-underline mb-4"
    icon="pi pi-plus"
  ></p-button>

  @if (products$ | async; as products) {
    <p-table [value]="products">
      <ng-template pTemplate="header">
        <tr>
          <th>Id</th>
          <th>Description</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Registration date</th>
          <th></th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-product>
        <tr>
          <td>{{ product.id }}</td>
          <td>{{ product.description }}</td>
          <td>S/{{ product.price }}</td>
          <td>{{ product.stock }}</td>
          <td>{{ product.registrationDate | date }}</td>
          <td class="flex gap-5">
            <p-button
              label="Delete"
              icon="pi pi-trash"
              class="text-white p-button bg-red-500 px-3 py-1"
              (click)="deleteProductConfirmation($event, product.id)"
            />

            <p-button
              label="Edit"
              [link]="true"
              icon="pi pi-pen-to-square"
              routerLink="/update/{{ product.id }}"
              class="p-button text-white bg-purple-500 px-3 py-1"
            ></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  }
</section>
